<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="description" content="Unicom is a multi-purpose site">
	<meta name="keywords" content="Site Template, One Page Template, Responsive Template">
	<meta name="author" content="Affapress">
  <title>will come from controller</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:500,600,700,800|Roboto:100,300,300i,400,400i,500,700,900" rel="stylesheet">


  <!-- #self header links and scripts -->
  <!-- <link rel="stylesheet" href="/assets/frontend/css/reset.css"> -->
  <script src="/assets/frontend/js/modernizr.js"></script>

  <!-- <script src="/assets/frontend/js/moment.js"></script> -->
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script> -->
  <!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css"> -->
  <!-- <link rel="stylesheet" href="/assets/frontend/css/cash-flow.css?<?php echo time(); ?>"> -->


  <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css" rel="stylesheet"> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script> -->
  <!-- <link rel="stylesheet" href="/assets/frontend/css/bootstrap-datetimepicker.css" rel="stylesheet" type="text/css"> -->
  <!-- <script src="/assets/frontend/js/bootstrap-datetimepicker.js"></script> -->
<!-- <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script> -->
  <!-- #self header links and scripts end -->

    <!-- Stylesheets -->
  <link rel="stylesheet" href="/assets/unicom/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/unicom/css/ionicons.min.css">
  <link rel="stylesheet" href="/assets/unicom/css/jquery.scrollbar.css">
  <link rel="stylesheet" href="/assets/unicom/css/slick.css">
  <link rel="stylesheet" href="/assets/unicom/css/slick-theme.css">
  <link rel="stylesheet" href="/assets/unicom/css/jquery.fancybox.css">
  <link rel="stylesheet" href="/assets/unicom/css/animate.min.css">
  <link rel="stylesheet" href="/assets/unicom/css/style.css">

  <link rel="stylesheet" href="/assets/unicom/css/style_from_old.css">
  <link rel="stylesheet" href="/assets/unicom/css/table.css">
  
  
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">

    <!-- Custom Colors -->
  <link rel="stylesheet" href="/assets/unicom/css/colors/blue/color.css">
  <!--<link rel="stylesheet" href="css/colors/orange/color.css">-->
  <!--<link rel="stylesheet" href="css/colors/pink/color.css">-->
  <!--<link rel="stylesheet" href="css/colors/purple/color.css">-->
  <!--<link rel="stylesheet" href="css/colors/yellow/color.css">-->


  <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>-->

  
  <noscript><link rel="stylesheet" href="/assets/unicom/css/no-js.css"></noscript>



<!-- Favicons -->
<link rel="shortcut icon" href="/assets/unicom/images/gk_for_favicon_oIe_icon.ico">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/unicom/images/gk_for_favicon-57x57.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/unicom/images/gk_for_favicon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/unicom/images/gk_for_favicon-114x114.png">
<!-- Favicons old -->
<!-- <link rel="shortcut icon" href="/assets/unicom/images/favicon.ico"> -->
<!-- <link rel="apple-touch-icon" href="/assets/unicom/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/unicom/images/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/unicom/images/apple-touch-icon-114x114.png"> -->
<style>
	#navigation .navbar-logo img {
		margin-top: -12px;
	}
</style>
</head>
<body class="body-header-transparent">

<!-- #nav-mobile on open left-panel:les then 991px;-->
    <nav id="nav-mobile">
        <div class="scrollbar-inner">

            <button type="button" class="navbar-btn-close"><i class="ion ion-close"></i>Close</button>

            <div class="navbar-menu">
            	<ul class="nav">

                    <li class="menu-item current-menu-item">
                      <a href="/">Գլխավոր</a>
                    </li>
                    <li class="menu-item ">
                      <a href="#">Մեր մասին</a>
                    </li>

                    <li class="menu-item menu-item-has-children">
                      <a href="#">Լուծումներ</a><span>+</span>
                      <ul class="sub-menu">
                        <li class="menu-item"><a href="blog-left-sidebar.html">Հաշվապահական և հարկային հաշվառում</a></li>
                        <li class="menu-item"><a href="blog-right-sidebar.html">Բիզնեսի ավտոմատացում</a></li>
                        <li class="menu-item"><a href="blog-no-sidebar.html">Հեռահար ծրագրի ներդնում</a></li>
                      </ul>
                    </li>

                    <li class="menu-item">
                      <a href="#">Հետաքրքիր</a>
                    </li>

                    <li class="menu-item ">
                      <a href="#">Կապ մեզ հետ</a>
                    </li>

                    <!--<li class="menu-item">
                    	<a href="#"><i class="ion-log-in"></i> Ելք</a>
                    </li>-->

                </ul>
            </div>

        </div>
	</nav>
    <!-- #nav-mobile end -->

    <!-- #body-wrap -->
    <div id="body-wrap">

        <!-- #header -->
        <header id="header" class="header-transparent ">

            <!-- #nav-mobile-top less then 991px-->
            <div id="nav-mobile-top">

                <!-- .container -->
                <div class="container-fluid">
                	<div class="navmenu">

                        <button type="button" class="navbar-btn-toggle"><i class="ion ion-navicon"></i></button>

                        <div class="navbar-logo">
                            <a href="/">
                                <img src="/assets/unicom/images/gk_white_blue_logo.png" alt="Logo">
                            </a> <!-- site logo -->
                        </div>

                        <div class="navbar-secondary">
                        	<div class="navbar-btn">
                              <!--<a href="#" class="btn-log"><i class="ion-log-in"></i></a> -->
																<?php $session = $this->session->userdata("user");
																	if(empty($session) || empty($session['email']) || empty($session['id']) ):?>
																		<a class="cd-subnav-trigger cd-signin btn-log" href="#0">
																		<i class="ion-log-in"></i>Մուտք</a>
																<?php else:?>
																			<a class="cd-subnav-trigger cd-logout btn-log" href="<?=base_url();?>home/logout">
																			<i class="ion-log-out"></i>Ելք</a>
																<?php endif;?>



																<!--<a href="cart.html" class="btn-cart"><i class="ion ion-bag"></i></a>
                                <a href="#" class="btn-search"><i class="ion ion-ios-search-strong"></i></a>-->
                            </div>
                        </div>

                    </div>
                </div>
                <!-- .container end -->

            </div>
            <!-- #nav-mobile-top end -->

            <!-- #navigation : great them 991px-->
            <nav id="navigation" data-armen-large-screen-navigation>
                <!-- .navbar -->
                <div class="navbar">

                    <!-- .container -->
                    <div class="container">
                        <div class="navbar-wrap">

                            <div class="navbar-logo"> <!-- site logo -->
															<div class="navbar-logo-wrap">
																<a href="/">
                                  <img src="/assets/unicom/images/gk_white_trans_logo.png" alt="Logo" class="logo-primary">
                                  <img src="/assets/unicom/images/gk_white_blue_logo.png" alt="Logo" class="logo-secondary">

																	<!-- <img src="/assets/unicom/images/logo-white-big.png" alt="Logo" class="logo-primary">
																	<img src="/assets/unicom/images/logo.png" alt="Logo" class="logo-secondary"> -->
																</a>
															</div>
														</div>

                            <div class="navbar-menu">
                                <ul class="nav" >
                                    <li class="menu-item current-menu-item">
                                      <a href="/">Գլխավոր</a>
                                    </li>
                                    <li class="menu-item ">
                                      <a href="#">Մեր մասին</a>
                                    </li>
                                    <li class="menu-item  menu-item-has-children">
                                    	<a href="#">Լուծումներ</a>
                                        <div class="sub-menu">
                                          <ul>
                                            <li class="menu-item"><a href="#">Հաշվապահական և հարկային հաշվառում</a></li>
                                            <li class="menu-item"><a href="#">Բիզնեսի ավտոմատացում </a></li>
                                            <li class="menu-item"><a href="#">Հեռահար ծրագրի ներդնում</a></li>
                                          </ul>
                                        </div>
                                    </li>

                                    <li class="menu-item">
                                      <a href="#">Հետաքրքիր</a>
                                    </li>
                                    <li class="menu-item ">
                                      <a href="#">Կապ մեզ հետ</a>
                                    </li>
                                </ul>

                                <div class="navbar-secondary">
                                	<!--div class="navbar-btn">
                                      <a href="#" class="btn-log"><i class="ion-log-in"></i></a>
                                  </div-->
                                  <div class="navbar-btn">
                                  <?php $session = $this->session->userdata("user");
																		 if(empty($session) || empty($session['email']) || empty($session['id']) ):?>
																			<a class="cd-subnav-trigger cd-signin btn-log" href="#0">
																			<i class="ion-log-in"></i>Մուտք</a>
																	<?php else:?>
																				<a class="cd-subnav-trigger cd-logout btn-log" href="<?=base_url();?>home/logout">
																				<i class="ion-log-out"></i>Ելք</a>
																	<?php endif;?>
                                  </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!-- .container end -->

                </div>
                <!-- .navbar end -->

            </nav>
            <!-- #navigation end -->
            <!--#header.header-transparent .header-content2 .header-content-overlay { padding-top:60px; }-->
            <!-- .header-content4  /assets/unicom/images/content/sliders/7.jpg-->

	            <div class="header-content2" data-parallax="scroll" data-speed="0.2" data-natural-width="1920" data-natural-height="1080" data-image-src="/assets/unicom/images/content/sliders/7.jpg">
	            	<div class="header-content-overlay-my bg-dark-overlay50">
	                    <!-- .container -->
	                    <div class="container"></div>
	                    <!-- .container end -->
	                </div>
	            </div>

            <!-- .header-content4 end -->

        </header>
        <!-- #header end -->

<!-- </body>
</html> -->



		<section class="cd-user-modal"> <!-- this is the entire modal form, including the background -->
				<div class="cd-user-modal-container"> <!-- this is the container wrapper -->
					<div id="cd-login"> <!-- log in form -->
						<form class="cd-form" action="<?=base_url();?>home/login" method="POST">
              <legend class="text-center"><h4>Մուտք ֆինանսական համակարգ</h4></legend>
							<span id="login_warning"></span>
							<p class="fieldset">
								<label class="image-replace cd-email" for="email">E-mail</label>
								<input class="full-width has-padding has-border" id="email" type="email" name="email" placeholder="Էլ. հասցե">
								<span class="cd-error-message" id="email_warning"></span>
							</p>

							<p class="fieldset">
								<label class="image-replace cd-password" for="password">Password</label>
								<input class="full-width has-padding has-border" id="password" type="password" name="password"  placeholder="Գաղտնաբառ">
								<span class="cd-error-message" id="password_warning"></span>
							</p>

							<p class="fieldset fildset-remember">
								<input type="checkbox" id="remember-me" checked>
								<label for="remember-me">Հիշել գաղտնաբառը</label>
							</p>

							<p class="fieldset">
								<input class=" btn btn-primary btn-block" type="button" id="login" value="Մուտք">
							</p>
						</form>
						<!-- <a href="#0" class="cd-close-form">Close</a>full-width -->
					</div> <!-- cd-login -->
					<a href="#0" class="cd-close-form">Close</a>
				</div> <!-- cd-user-modal-container -->
		</section> <!-- cd-user-modal -->

<!-- END of Header -->
<!-- 'frontend/templates/header' -->
<!-- 'frontend/templates/footer_simple' -->


<!-- START of Table-body -->
<div class="filter-and-table-wrap">
<div class="filter-wrap">
<!-- <h1><?= $title; ?></h1> -->

<?php

// var_dump($storages);
// var_dump($mtgroups);
// var_dump($materials);
// var_dump($partners);
// echo 'This is dataT <br>';
// var_dump($dataT);
//var_dump($_GET);

if(isset($_GET["sort_by"]) && $_GET["sort_by"] ==  0) {
  $td_count = 12;
  $sort_by = 0;
} elseif (isset($_GET["sort_by"]) && $_GET["sort_by"] ==  2) {
  $td_count = 7;
  $sort_by = 2;
}elseif (isset($_GET["sort_by"]) && $_GET["sort_by"] ==  1) {
  $td_count = 5;
  $sort_by = 1;
}else{
  $sort_by = null;
  $td_count = null;
}

if (!empty($dataT)) {

    $tot_cost_sum = fancy_num(0);
    $tot_sale_sum = fancy_num(0);
    $tot_rent     = fancy_num(0);
    $tot_marge    = fancy_num(0);
    foreach ($dataT as $keyT => $valueT) {

      $tot_cost_sum += fancy_num($valueT["cost_sum"]);
      $tot_sale_sum += fancy_num($valueT["sale_sum"]);
          $tot_rent += fancy_num($valueT["rent"]);
         $tot_marge += fancy_num($valueT["marge"]);
  }
}


function fancy_num($num) {
  return number_format($num, 2, '.', '');
}

function check_more_than_zero($num) {
  // return ($num < 0) ? 'style="color:red"' : '';
  return ($num < 0) ? 'not-available' : 'available';
}
?>
<!-- .container -->
<div class="container padding-top40 padding-bottom40">
		
		<!--Export-printer-->
    <div class="export-wrap margin-bottom20">
      <div class="row">
        <div class="col-md-12">
          <div class="col-xs-offset-3">

                <div class="col-xs-2 ">
                  <a href="javascript:window.print()">
                    <img src="/assets/frontend/img/printer.png" alt="Print">
                    <span>Excel</span>
                  </a>
                </div>
                <div class="col-xs-2">
                  <a id="toExcel">
                    <img src="/assets/frontend/img/excel.png" alt="Excel">
                    <span>Excel</span>
                  </a>
                </div>
                <div class="col-xs-2">
                  <a id="toPdf">
                    <img src="/assets/frontend/img/pdf.png" alt="PDF">
                    <span>PDF</span>
                  </a>
                </div>
                <div class="col-xs-2">
                  <a>
                    <img src="/assets/frontend/img/email.png" alt="Email">
                    <span>Email</span>
                  </a>
                </div>

          </div>
      </div>
    </div>
  </div>


  <div class="row">
    <div class="col-md-12">


			<!--Panel-->
      <div class="panel panel-primary"> <!-- 2 -->
          <div class="panel-heading" role="tab" id="heading12">
            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion3" href="#collapse12" aria-expanded="false" aria-controls="collapse12">
              <h4 class="panel-title" style="color:white">
                Վաճառքի վերլուծություն
                <span class="pull-right">
                    <i class="ion ion-chevron-right" data-accord-chevron="accord-chevron" style="color:white"></i>
                </span>
              </h4>
            </a>
          </div>

          <div id="collapse12" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading12">
              <div class="panel-body">

                  <form class="accordion-form" action="/table" method="get">
                    <fieldset>
                      <legend></legend>
                      <div class="row form-row-1">
                          <div class="col-sm-4">
                            <label class="col-sm-12 control-label" for="start_date">Ժամանակահատված/սկիզբ <i class="ion ion-ios-medical-outline"></i></label>
                            <input type="date" name="start_date_pick" value="" class="input-rect form-control" id="start_date_pick">
                            <input type="text" name="start_date" value="" class="input-rect form-control" id="start_date" required>
                          </div>
                          <div class="col-sm-4">
                            <label class="col-sm-12 control-label" for="end_date">Ժամանակահատված/ավարտ <i class="ion ion-ios-medical-outline"></i></label>
                            <input type="date" name="end_date_pick" value="" class="input-rect form-control" id="end_date_pick">
                            <input type="text" name="end_date" value="" class="input-rect form-control" id="end_date" required>
                          </div>
                          <div class="col-sm-4">
                            <label class="col-sm-12 control-label" for="select_store">Պահեստներ</label>
                            <select class="input-rect form-control input-lg" name="warehouse" id="select_store">
                              <optgroup label="Ընտրել Պահեստը">
                                <option value="0" id="0">... ոչինչ ընտրված չէ</option>
                                <?php
                                if(isset($storages) && is_array($storages) && count($storages) > 0) :
                                    foreach($storages as $storage) : ?>
                                        <option data-tokens="<?php echo $storage['storage_name']; ?>" value="<?php echo $storage['storage_name']; ?>" id="<?php echo $storage['storage_id']; ?>" ><?php echo $storage['storage_name']; ?></option>
                                        <?php
                                    endforeach;
                                 endif; ?>
                              </optgroup>
                            </select>
                          </div>
                      </div>


                      <div class="col-sm-4">
                        <label class="col-sm-12 control-label" for="product_service_group">Ապրանքի խումբ</label>
                        <select class="input-rect form-control input-lg" name="product_service_group" id="product_service_group">
                          <optgroup label="Ընտրել ապրանքի խումբը">
                            <option value="0" id="0"> ... ոչինչ ընտրված չէ</option>
                            <?php
                            if(isset($mtgroups) && is_array($mtgroups) && count($mtgroups) > 0) :
                                foreach($mtgroups as $mtgroup) :  ?>
                                    <option data-tokens="<?php echo $mtgroup['prod_group_name']; ?>" value="<?php echo $mtgroup['prod_group_name']; ?>" id="<?php echo $mtgroup['prod_group_id']; ?>" ><?php echo $mtgroup['prod_group_name']; ?></option>
                                    <?php
                                endforeach;
                            endif; ?>
                          </optgroup>
                        </select>
                      </div>

                      <div class="col-sm-4">
                        <label class="col-sm-12 control-label" for="product_service">Ապրանքի կամ ծառայության տեսակ</label>
                        <select class="input-rect form-control input-lg" name="product_service" id="product_service">
                          <optgroup label="Ընտրել ապրանքի կամ ծառայության տեսակը">
                            <option value="0" id="0"> ... ոչինչ ընտրված չէ</option>
                            <?php
                            if(isset($materials) && is_array($materials) && count($materials) > 0) :
                                foreach($materials as $material) :  ?>
                                    <option data-tokens="<?php echo $material['prod_name']; ?>" value="<?php echo $material['prod_name']; ?>" id="<?php echo $material['prod_id']; ?>" ><?php echo $material['prod_name']; ?></option>
                                    <?php
                                endforeach;
                            endif; ?>
                          </optgroup>
                        </select>
                      </div>

                      <div class="col-sm-4">
                        <label class="col-sm-12 control-label" for="partner">Գործընկեր</label>
                        <select class="input-rect form-control input-lg" name="partner" id="partner">
                          <optgroup label="Ընտրել գործընկերոջը">
                            <option value="0" id="0"> ... ոչինչ ընտրված չէ</option>
                            <?php
                            if(isset($partners) && is_array($partners) && count($partners) > 0) :
                                foreach($partners as $partner) :  ?>
                                    <option data-tokens="<?php echo $partner['partner_name']; ?>" value="<?php echo $partner['partner_name']; ?>" id="<?php echo $partner['partner_id']; ?>" ><?php echo $partner['partner_name']; ?></option>
                                    <?php
                                endforeach;
                            endif; ?>
                          </optgroup>
                        </select>
                      </div>


                      <div class="col-sm-4 col-sm-offset-4 margin-top20">
                        <label class="col-sm-12 control-label" for="sort_by">Խմբավորման չափանիշներ՝</label>
                        <select class="input-rect form-control input-lg" name="sort_by" id="sort_by">
                          <optgroup label="Ընտրել խմբավորման չափանիշները">
                            <option value="0" id="0"> ... ոչինչ ընտրված չէ</option>
                            <option id="1" value="1">Ըստ գործընկերոջ</option>
                            <option id="2" value="2">Ըստ ապրանքի</option>
                          </optgroup>
                        </select>
                      </div>

                      <div class="col-sm-12 margin-top20 text-center">
                        <button type="submit" name="kaka" class="btn btn-primary btn-block btn-md" id="btn_search_by_filter">Search</button>
                        <!-- <input type="submit" class="btn btn-primary btn-block btn-md" id="btn_search_by_filter" value="Փնտրել"> -->
                      </div>
                      <div class="col-sm-12 margin-top20 text-center">
                      	<a class="btn btn-primary btn-block btn-md" href="/table">Reset</a>
                      </div>
                    </fieldset>
                  </form>

              </div>
          </div>
      </div>

    </div>
  </div>
</div>
<!-- .container end -->
</div>


<div class="loader text-center">			
	<img src="/assets/unicom/images/fancybox_loading@2x.gif" alt="Loading..." />	
</div>

<style type="text/css">
	#myTable thead td,
	#myTable tbody td,
	#myTable tfoot td,
	#myTable thead th{
		padding: 2px 2px;
		font-size: 14px;
	}
</style>

<section id="table_wrapper">
<div class="table-wrap">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="table-responsive">

          <table class="table table-bordered table-condensed table-hover table-striped display compact" id="myTable" style="width:100%">
            <h4 class="caption text-center">Որոնման արդյունքներ</h4>
            <thead id="test"> <!-- bootstrap data-spy="affix" data-offset-top="110" -->
              <tr class="myHead">
                <th>Search:</th>
                <th colspan="<?= $td_count-1 ?>">
                  <input type="text" class="form-control" placeholder="Search..." id="search_field">
                </th>                
              </tr>
              <!--<tr class="myHead" data-now-is-hidden-on-main-dataTable-function>
              	<th id="new_myTable_filter" colspan="<?= $td_count-3 ?>"></th>	
								<th id="new_dataTables_length" colspan="3"></th>															
							</tr>-->
							
              <tr class="myHead">
                <th>
                  <div class="checkbox">
                      <label><input type="checkbox" value="" id="select_all">Ընտրել Բոլորը</label>
                      <button id="gutan" class="btn">Ֆիլտրել</button>
                  </div>
                </th>

              <?php if($sort_by == 0) : ?>
                <th>Ամսաթիվ</th>
                <th>Կոդ</th>
                <th>Ապրանքի տեսակ</th>
                <th>Պահեստ</th>
                <th>Գործընկեր</th>

                <th>Քանակ</th>
                <th>Չափման միավոր</th>
              <?php endif; ?>

              <?php if($sort_by ==  2): ?>
                <th>Քանակ</th>
                <th>Չափման միավոր</th>
              <?php endif; ?>

                <th>Վաճառքի ինքնարժեք</th>
                <th>Վաճառքի գումար</th>
                <th>Շահույթ</th>
                <th>Շահույթի տոկոս</th>
              </tr>
            </thead>

            <tfoot>
              <tr class="myFoot">
                <th class="text-center h4" colspan="<?= $td_count ?>">Ընդհամենը</th>
              </tr>
              <tr class="text-center myFoot">
                <?php  /*if (!empty($dataT)) {}*/
                 for ($i=$td_count; $i > 0; $i--) {
                  if ($i == 1) {
                    echo '<td class="deeper">'.$tot_marge.'</td>';
                  }elseif ($i == 2) {
                    echo '<td class="deeper">'.$tot_rent.'</td>';
                  }elseif ($i == 3) {
                    echo '<td class="deeper">'.$tot_sale_sum.'</td>';
                  }elseif ($i == 4) {
                    echo '<td class="deeper">'.$tot_cost_sum.'</td>';
                  }else{
                    echo '<td>'. ' -- ' .'</td>';
                  }
                  // $tot_cost_sum = fancy_num(0);
                  // $tot_sale_sum = fancy_num(0);
                  // $tot_rent     = fancy_num(0);
                  // $tot_marge    = fancy_num(0);
                  // echo '<td>'.$i.'</td>';
                } ?>
              </tr>
              <tr class="myFoot">
                <th class="text-center h4" colspan="<?= $td_count ?>">Նշվածները</th>
              </tr>
              <tr class="text-center current-summary myFoot">
                <?php  /*if (!empty($dataT)) {}*/
                 for ($i=$td_count; $i > 0; $i--) {
                  if ($i == 1) {
                    echo '<td class="deeper" id="cur_marge_print"> '.fancy_num(0).' </td>';
                  }elseif ($i==2) {
                    echo '<td class="deeper" id="cur_rent_print"> '.fancy_num(0).' </td>';
                  }elseif ($i==3) {
                    echo '<td class="deeper" id="cur_sale_sum_print"> '.fancy_num(0).' </td>';
                  }elseif ($i==4) {
                    echo '<td class="deeper" id="cur_cost_sum_print"> '.fancy_num(0).' </td>';
                  }else{
                    echo '<td>'.' -- '.'</td>';
                  }
                } ?>
              </tr>
            </tfoot>

            <tbody>

              <?php if (!empty($dataT)) :
                // echo '<h6> Not Empty dataT </h6>';
                $cost_sum = fancy_num(0);
                $sale_sum = fancy_num(0);
                $rent     = fancy_num(0);
                $marge    = fancy_num(0);
                foreach ($dataT as $keyT => $value) :

                  $cost_sum += fancy_num($value["cost_sum"]);
                  $sale_sum += fancy_num($value["sale_sum"]);
                      $rent += fancy_num($value["rent"]);
                     $marge += fancy_num($value["marge"]);
                ?>

                  <tr>
                    <td>
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" class="chkOptions" value="1" 
                                      data-cost-curr="<?= fancy_num($value["cost_sum"]) ?>"
                                      data-sale-curr="<?= fancy_num($value["sale_sum"]) ?>"
                                      data-rent-curr="<?= fancy_num($value["rent"]) ?>"
                                      data-marge-curr="<?= fancy_num($value["marge"]) ?>">
                          Ընտրել
                        </label>
                      </div>
                    </td>

                  <?php if ($sort_by== 0) : ?>
                    <td><?= date("Y-m-d",strtotime($value['date'])) ?></td>
                    <td><?= $value['prod_code'] ?></td>
                    <td><?= $value['prod_name'] ?></td>
                    <td><?= $value['storage_name'] ?></td>
                    <td><?= $value['partnr_name'] ?></td>
                    <td class="<?= check_more_than_zero($value['count']) ?>"><?= fancy_num($value['count']) ?></td>
                    <td class="<?= check_more_than_zero($value['qnt_unit']) ?>"><?= $value['qnt_unit'] ?></td>
                  <?php endif; ?>

                  <?php if ($sort_by==2) : ?>
                    <td class="<?= check_more_than_zero($value['count']) ?>"><?= fancy_num($value['count'])  ?></td>
                    <td class="<?= check_more_than_zero($value['qnt_unit']) ?>"><?= $value['qnt_unit'] ?></td>
                  <?php endif ?>

                     <td class="<?= check_more_than_zero($value['cost_sum']) ?> border-dashed"><?= fancy_num($value['cost_sum'])  ?></td>
                     <td class="<?= check_more_than_zero($value['sale_sum']) ?> border-dashed"><?= fancy_num($value['sale_sum']) ?></td>
                     <td class="<?= check_more_than_zero($value['rent']) ?> border-dashed"><?= fancy_num($value['rent'])  ?></td>
                     <td class="<?= check_more_than_zero($value['marge']) ?> border-dashed"><?= fancy_num($value['marge']) ?></td>
                  </tr>

                <?php endforeach;
              endif; ?>
            </tbody>
          </table>


        </div>
      </div>
    </div>
  </div>
</div>
</section>
</div>



<!--<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>-->
<!-- Live-Search-Through-Table-Rows-Using-jQuery -->


	<!-- Footer START -->
	<footer id="footer" class="footer-6">            
	    <div class="container"><!-- .container -->
	        <div class="footer-socials2">
	            <ul>
	                <li><a href="#" title="Facebook"><i class="ion ion-social-facebook"></i></a></li>
	                <li><a href="#" title="Twitter"><i class="ion ion-social-twitter"></i></a></li>
	                <li><a href="#" title="Dribbble"><i class="ion ion-social-instagram"></i></a></li>
	            </ul>
	        </div>

					<div class="footer-logo">
						<!-- <img src="images/logo2.png" alt="Logo"> -->
	          <img src="/assets/unicom/images/gk_white_trans_logo.png" alt="Logo" class="logo-primary">
					</div>

	        <p>GkeySystems &copy; 2018 by <a href="http://webex.am/" target="_blank">webex.am</a></p>
	    </div><!-- .container end -->

	</footer>
	<!-- #footer end -->
</div>
<!-- #body-wrap end -->

    <a href="#" class="scrollup" title="Back to Top!"><i class="ion ion-android-arrow-up"></i></a> <!-- Back to Top -->


    <!-- JavaScripts -->
    
    <!--<script type="text/javascript" src="/assets/unicom/js/jquery-1.12.4.min.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

    <script type="text/javascript" src="/assets/unicom/js/jquery-migrate-1.4.1.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.easing.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.plugin.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/response.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/waypoints.min.js"></script>
    
    <script type="text/javascript" src="/assets/unicom/js/jquery.scroll-with-ease.js"></script>
    
    <script type="text/javascript" src="/assets/unicom/js/jquery.placeholder.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.mousewheel-3.0.6.pack.js"></script>
    
    <script type="text/javascript" src="/assets/unicom/js/jquery.scrollbar.min.js"></script>
    
    <script type="text/javascript" src="/assets/unicom/js/parallax.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/isotope.pkgd.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/slick.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.fancybox.pack.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.fancybox-media.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.counterup.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/jquery.countdown.min.js"></script>
    <script type="text/javascript" src="/assets/unicom/js/script.js"></script>



    <script type="text/javascript" src="/assets/unicom/js/jquery.floatThead.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>


    <!-- its scripts -->
		    <!--<script src="<?=base_url();?>/assets/frontend/js/owl.carousel.min.js"></script>-->
		    <!--<script src="<?=base_url();?>/assets/frontend/js/woco.accordion.min.js"></script>-->
		    <!--<script src="http://hammerjs.github.io/dist/hammer.min.js"></script>-->

		    <!--<script type="text/javascript" src="/assets/frontend/js/tableExport.js"></script>-->
		    <!--<script type="text/javascript" src="/assets/frontend/js/jquery.base64.js"></script>-->
		    <!--<script type="text/javascript" src="/assets/frontend/js/jspdf/jspdf.js"></script>-->
		    <!--<script type="text/javascript" src="/assets/frontend/js/jspdf/libs/sprintf.js"></script>-->
		    <!--<script type="text/javascript" src="/assets/frontend/js/jspdf/libs/base64.js"></script>-->
		    <!--<script type="text/javascript" src="/assets/frontend/js/main.js"></script>-->
    <!-- its scripts end -->
 
  <script>
      // ankarg menu //
			/*window.onload =()=> {
        let elm = document.querySelector('#header');
        let body = window.document.body;
        elm.classList.add('header-transparent');
        body.classList.add('body-header-transparent');
      }*/

		$(function(){
	
			/*	-------login-logout------		*/
    	$(document).on("click","#login",function() {
            var email    = $("#email").val().trim();
            var password = $("#password").val().trim();
            $("#login_warning").empty();
            $("#email_warning").empty();
            $("#email_warning").css({"visibility":'none', "opacity": 0 });
            $("#password_warning").empty();
            $("#password_warning").css({"visibility":'none', "opacity": 0 });
        		var email_regex = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
       			var my_error = false;
            if (email == '') {
          		my_error = true;
              $("#email_warning").append("Էլ. հասցեն նշված չէ !");
              $("#email_warning").css({"visibility":'inherit', "opacity": 1 });
            }else if (!email_regex.test(email)) {
          		my_error = true;
          		$("#email_warning").append("Դաշտի պարունակությունը չի հանդիսանում Էլ. հասցե !");
              $("#email_warning").css({"visibility":'inherit', "opacity": 1 });
            }
            if (password == '') {
              my_error = true;
              $("#password_warning").append("Գաղտնաբառը նշված չէ !");
              $("#password_warning").css({"visibility":'inherit', "opacity": 1 });
            }
            if (!my_error) {
          		$.ajax({
                  type: "POST",
                  url: "<?=base_url()?>home/login",
                  data: {email: email, password: password},
                  success: function(data){
                  	
                      if (data == 1){
                        window.location.href = "<?=base_url()?>home/dramarkkhi_sharj";
                      }else if(data == 0){
                        location.reload();
                      }else {
                        var login_user_data = $.parseJSON(data);
                        if (login_user_data.error.email) {
														$("#email_warning").append(login_user_data.error.email);
														$("#email_warning").css({"visibility":'inherit', "opacity": 1 });
                        }
                        if (login_user_data.error.password) {
                            $("#password_warning").append(login_user_data.error.password);
                      			$("#password_warning").css({"visibility":'inherit', "opacity": 1 });
                    		}
                				if (login_user_data.error.user_error) {
                            $("#login_warning").append(login_user_data.error.user_error);
                      			$("#login_warning").css({"color":'red', 'font-weight': 'bold'});
                    		}
                      }
                  }
              });
            }
      });

      $(document).on("click","#email",function() {
              $("#email_warning").css({"visibility":'none', "opacity": 0 });
      });
      $(document).on("click","#password",function() {
              $("#password_warning").css({"visibility":'none', "opacity": 0 });
      });
    });
	</script>
<!-- Footer END -->


<script type="text/javascript">
	// toggle accordion ion-chevron icon  START--->
	let accord_toggle = document.querySelector('a[data-toggle="collapse"]');
	let accord_chevron = document.querySelector('i[data-accord-chevron="accord-chevron"]');
	accord_toggle.addEventListener('click', ()=>{
	  if(accord_toggle.getAttribute('class') !==''){
	    accord_chevron.classList.remove('ion-chevron-right');
	    accord_chevron.classList.add('ion-chevron-down');
	  }else{
	    accord_chevron.classList.remove('ion-chevron-down');
	    accord_chevron.classList.add('ion-chevron-right');
	  }
	});
// toggle accordion ion-chevron icon  END--->

// work like a datepicker START -->
  let start_date_pick = document.getElementsByName('start_date_pick')[0];
  let start_date = document.getElementsByName('start_date')[0];
  let end_date = document.getElementsByName('end_date')[0];
  start_date_pick.addEventListener('change',()=>{
    let start_dashed = start_date_pick.value;
    let start_slashed = start_dashed.replace(/-/g,"/");
    console.log(start_dashed);
    console.log(start_slashed);
    start_date.value = start_slashed;
    end_date.value = start_slashed;
  })


  let end_date_pick = document.getElementsByName('end_date_pick')[0];
  end_date_pick.addEventListener('change', ()=>{
    let end_dashed = end_date_pick.value;
    let end_slashed = end_dashed.replace(/-/g,"/");
    console.log(end_slashed);
    end_date.value = '';
    end_date.value = end_slashed;
  })
// work like a datepicker END <--


// check-uncheck:
// data-cost-curr
// data-sale-curr
// data-rent-curr
// data-marge-curr


<?php if(!empty($dataT)) : ?>
	window.onload =()=> {
    // ankarg menu //
/*    let elm = document.querySelector('#header');
    let body = window.document.body;
    elm.classList.add('header-transparent');
    body.classList.add('body-header-transparent');*/
    // ankarg menu //


		  /* row-checkbox management START---> */
	    let chAll = document.querySelectorAll('.chkOptions');	  
		  for(let i=0; i < chAll.length; i++ ) {
		      chAll[i].addEventListener('change',function(){
		        select_update();
		      })
		  }

		  function select_update() {
		    let checked_data_cost=0;
		    let checked_data_sale=0;
		    let checked_data_rent=0;
		    let checked_data_marge=0;
		    let checkedAll = document.querySelectorAll('.chkOptions:checked');
		    let countChecked = checkedAll.length;
		    console.log(countChecked);
		    for(let j=0; j < countChecked; j++){
		        //console.log(checkedAll[j].getAttribute('data-mu'));
		        checked_data_cost += parseFloat(checkedAll[j].getAttribute('data-cost-curr'));
		        checked_data_sale += parseFloat(checkedAll[j].getAttribute('data-sale-curr'));
		        checked_data_rent += parseFloat(checkedAll[j].getAttribute('data-rent-curr'));
		        checked_data_marge += parseFloat(checkedAll[j].getAttribute('data-marge-curr'));
		    }
		    console.log(checked_data_cost);
		    cur_cost_sum_print.innerText = checked_data_cost.toFixed(2);
		    cur_sale_sum_print.innerText = checked_data_sale.toFixed(2);
		    cur_rent_print.innerText = checked_data_rent.toFixed(2);
		    cur_marge_print.innerText = (checked_data_marge/countChecked).toFixed(2);

		    if(countChecked){
		       gutan.setAttribute("onclick","fundo()");
		       document.querySelector('.current-summary').classList.add('current-active');
		     }
		    else{
		      gutan.setAttribute("onclick","pundo()");
		      document.querySelector('.current-summary').classList.remove('current-active');
		    }

		  }
		  /* row-checkbox management END---> */


		  /* main-checkbox management START--> */
		  let mch = document.querySelector('#select_all');
		  mch.addEventListener('change',(event)=>{
		      console.log(event.target.checked);
		      select_update_all(event.target.checked);
		  })

		  function select_update_all(mch_switch) {
		      let checked_data_cost = 0;
		      let checked_data_sale=0;
		      let checked_data_rent=0;
		      let checked_data_marge=0;
		      let countSelectedChecked;
		      for(let k=0; k < chAll.length; k++) {
		          chAll[k].checked = mch_switch;
		          if(mch_switch){
		          	countSelectedChecked++;
		            checked_data_cost += parseFloat(chAll[k].getAttribute('data-cost-curr'));
		            checked_data_sale += parseFloat(chAll[k].getAttribute('data-sale-curr'));
		            checked_data_rent += parseFloat(chAll[k].getAttribute('data-rent-curr'));
		            checked_data_marge += parseFloat(chAll[k].getAttribute('data-marge-curr'));
		            gutan.setAttribute("onclick","fundo()");
		            document.querySelector('.current-summary').classList.add('current-active');
		          }else{
		            checked_data_cost=0;
		            checked_data_sale=0;
		            checked_data_rent=0;
		            checked_data_marge=0;
		            gutan.setAttribute("onclick","pundo()");
		            document.querySelector('.current-summary').classList.remove('current-active');
		          }
		      }
		      console.log(checked_data_cost);
		      cur_cost_sum_print.innerText = checked_data_cost.toFixed(2);
		      cur_sale_sum_print.innerText = checked_data_sale.toFixed(2);
		      cur_rent_print.innerText = checked_data_rent.toFixed(2);
		      cur_marge_print.innerText = (checked_data_marge/countSelectedChecked).toFixed(2);
		  }
		  /* main-checkbox management END--> */

	  	fundo=()=> {
	      console.log('fundo');
	      for(let i=0; i < chAll.length; i++ ) {
	        if(chAll[i].checked === true){
	          chAll[i].parentElement.parentElement.parentElement.parentElement.style.opacity = '1';
	          chAll[i].parentElement.parentElement.parentElement.parentElement.style.display = 'table-row';
	        }else{
	          chAll[i].parentElement.parentElement.parentElement.parentElement.style.opacity  = '0.5';
	          chAll[i].parentElement.parentElement.parentElement.parentElement.style.display  = 'none';
	        }
	      }
	    }

	    pundo=()=> {
	      console.log('pundo');
	      for(let i=0; i < chAll.length; i++){
	        chAll[i].parentElement.parentElement.parentElement.parentElement.style.opacity = '1';
	        chAll[i].parentElement.parentElement.parentElement.parentElement.style.display = 'table-row';
	        chAll[i].checked = false;
	      }
	    }
	}
	
<?php endif; ?>
</script>

<script>

$(document).ready(function() {
	
	// Loader controll //
	$('.loader').hide();
  
  // Global Search-button //
  // https://www.jqueryscript.net/table/Live-Search-Through-Table-Rows-Using-jQuery.html
  $('#search_field').on('keyup', function() {
      var value = $(this).val();
      var patt = new RegExp(value, "i");
      $('#myTable').find('tr').each(function() {
          if (!($(this).find('td').text().search(patt) >= 0)) {
              $(this).not('.myHead').hide();
              $('.myFoot').show();
          }
          if (($(this).find('td').text().search(patt) >= 0)) {
              $(this).show();
          }
      });
  });
  
  
  // dataTable plugin //
	var table =	$('#myTable').DataTable({
		"autoFill": true,
		"responsive": true,
		"paging": false,
		"processing": false,
		"searching": false
	});
	$('#new_myTable_filter').html($(".dataTables_filter"));
	$('#new_dataTables_length').html($('.dataTables_length'));
	

		




  // fixing head of table
  // all settings see on : https://www.jqueryscript.net/table/jQuery-Fix-Table-header-When-Scrolling-floatThead.html
  let toTop = $('#navigation').height();
  let toBot = $('#table_wrapper').height();
  
  $('table').floatThead({
      position: 'absolute',
      top: toTop-20,
      bottom: toBot + 200,
  });
  
  
});
</script>






</body>
</html>

